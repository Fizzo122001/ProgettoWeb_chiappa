<!DOCTYPE html>
<html lang="it">

<%- include("head") %>


    <body class="gradient-custom d-flex flex-column min-vh-100">
        <%- include("header", { authenticated, title, Getrecensioni, coach , id_utente}) %>
            <div class="container flex-grow-1 d-flex flex-column justify-content-center text-center">
                <div class="row align-items-center">
                    <div class="col-lg-12">
                        <h4 class="mt-4 text-center">Qui puoi vedere tutte le recensioni e scrivere le recensioni</h4>
                        <% if (Getrecensioni && Getrecensioni.length> 0) { %>
                            <div class="row justify-content-center">
                                <% Getrecensioni.forEach((recensione)=> { %>
                                    <div id="card-ordine" class="p-3 col-md-6 col-lg-4">
                                        <div class="card mb-4">
                                            <div class="card-body">
                                                <h5 class="card-title">Numero di recensione: 00000<%= recensione.ID %>
                                                </h5>
                                                <p>Utente: <%= recensione.id_utente %>
                                                </p>
                                                <p class="card-text">
                                                    <%= recensione.commento %>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <% }); %>
                            </div>
                            <% } else { %>
                                <p>Nessuna recensione trovata.</p>
                                <% } %>

                                    <% if (authenticated) { %>
                                        <div class="mt-4">
                                            <h5 class="text-center">Scrivi una recensione</h5>
                                            <form action="/recensioni/inserisci_recensione" method="POST">
                                                <div class="mb-3">
                                                    <label for="id_utente" class="form-label">ID Utente</label>
                                                    <input type="email" class="form-control" id="id_utente"
                                                        name="id_utente" value="<%= id_utente %>" readonly required>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="testoRecensione" class="form-label">Testo
                                                        Recensione</label>
                                                    <textarea class="form-control" id="testoRecensione"
                                                        name="testoRecensione" rows="3" required></textarea>
                                                </div>
                                                <button type="submit" class="btn btn-warning mt-4 mb-4">Invia
                                                    Recensione</button>
                                            </form>
                                        </div>
                                        <% } else { %>
                                            <p class="mt-4">Effettua l'accesso per poter inviare una recensione.</p>
                                            <% } %>
                    </div>
                </div>
            </div>
            <!-- Footer -->
            <%- include("footer") %>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>

</html>